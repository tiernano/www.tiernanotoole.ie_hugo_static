<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

<meta property="og:title" content="VLANs, Wifi and Mikrotik" />
<meta property="og:description" content="About a month ago, while i was recovering from surgery, i attended a Webinar on Cisco Meraki devices. After the webinar, i was contacted by Maraki and given a MR18 with a 3 year license, to play with and evaluate. So, i set it up in the house and all was good.
Thing is, the wifi in the house was grand previously. I have a Routerboard RB951G which does the job and has no issues." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.tiernanotoole.ie/2015/05/10/vlans-wifi-and-mikrotik.html" />



<meta property="article:published_time" content="2015-05-10T18:40:00&#43;00:00"/>

<meta property="article:modified_time" content="2018-07-04T22:01:47&#43;01:00"/>












<meta itemprop="name" content="VLANs, Wifi and Mikrotik">
<meta itemprop="description" content="About a month ago, while i was recovering from surgery, i attended a Webinar on Cisco Meraki devices. After the webinar, i was contacted by Maraki and given a MR18 with a 3 year license, to play with and evaluate. So, i set it up in the house and all was good.
Thing is, the wifi in the house was grand previously. I have a Routerboard RB951G which does the job and has no issues.">


<meta itemprop="datePublished" content="2015-05-10T18:40:00&#43;00:00" />
<meta itemprop="dateModified" content="2015-05-10T18:40:00&#43;00:00" />
<meta itemprop="wordCount" content="450">



<meta itemprop="keywords" content="Networking,RouterOS,Mikrotik," />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="VLANs, Wifi and Mikrotik"/>
<meta name="twitter:description" content="About a month ago, while i was recovering from surgery, i attended a Webinar on Cisco Meraki devices. After the webinar, i was contacted by Maraki and given a MR18 with a 3 year license, to play with and evaluate. So, i set it up in the house and all was good.
Thing is, the wifi in the house was grand previously. I have a Routerboard RB951G which does the job and has no issues."/>






<meta name="generator" content="Hugo 0.42.1" />


    <base href="https://www.tiernanotoole.ie/">
    <link rel="canonical" href="https://www.tiernanotoole.ie/2015/05/10/vlans-wifi-and-mikrotik.html">
    <title>VLANs, Wifi and Mikrotik | Tiernan&#39;s Comms Closet</title>

    <!-- CSS -->
    <link href="https://www.tiernanotoole.ie/css/app.css" rel="stylesheet">

    

    

    
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-220614-15', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
<script src="cloudinary-core-shrinkwrap.js" type="text/javascript"></script>

   
<script type="text/javascript">
    var appInsights = window.appInsights || function(a) {
        function b(a) {
            c[a] = function() {
                var b = arguments;
                c.queue.push(function() {
                    c[a].apply(c, b)
                })
            }
        }
        var c = {
                config: a
            },
            d = document,
            e = window;
        setTimeout(function() {
            var b = d.createElement("script");
            b.src = a.url || "https://az416426.vo.msecnd.net/scripts/a/ai.0.js", d.getElementsByTagName("script")[0].parentNode.appendChild(b)
        });
        try {
            c.cookie = d.cookie
        } catch (a) {}
        c.queue = [];
        for (var f = ["Event", "Exception", "Metric", "PageView", "Trace", "Dependency"]; f.length;) b("track" + f.pop());
        if (b("setAuthenticatedUserContext"), b("clearAuthenticatedUserContext"), b("startTrackEvent"), b("stopTrackEvent"), b("startTrackPage"), b("stopTrackPage"), b("flush"), !a.disableExceptionTracking) {
            f = "onerror", b("_" + f);
            var g = e[f];
            e[f] = function(a, b, d, e, h) {
                var i = g && g(a, b, d, e, h);
                return !0 !== i && c["_" + f](a, b, d, e, h), i
            }
        }
        return c
    }({
        instrumentationKey: "6ba6d0d3-8f0c-43c9-bea2-1547cb66b576"
    });

    window.appInsights = appInsights, appInsights.queue && 0 === appInsights.queue.length && appInsights.trackPageView();
</script>

  </head>
  <body>

    <header class="nav">
      <div class="top-bar">
        <div class="row column">
          <div class="top-bar-left">
            <ul class="menu">
              <li><a href="https://www.tiernanotoole.ie/">
                  Tiernan's Comms Closet
                </a></li>
            </ul>
          </div>
          <div class="top-bar-right">
            <ul class="menu">
              <li class=""><a href="https://www.tiernanotoole.ie/">
                Home
              </a></li>
              
                
                  <li><a href="https://www.tiernanotoole.ie/dailycarry/">
                    Daily Carry
                  </a></li>
                
              
            </ul>
          </div>
        </div>
      </div>
    </header>

    <header class="blog-header">
      <div class="callout large">
        <div class="row column text-center">
          <h1>
            <a href="https://www.tiernanotoole.ie/" rel="home">Tiernan's Comms Closet</a>
          </h1>
          
            <p>
              Geek, Programmer, Photographer&hellip;
            </p>
          
        </div>
      </div>
    </header>

    <main>
      <div class="row" id="content">
        <div class="medium-8 columns">
          
  


  <div class="blog-post">
    <h3>
      <a href="https://www.tiernanotoole.ie/2015/05/10/vlans-wifi-and-mikrotik.html">VLANs, Wifi and Mikrotik</a>
    </h3>
    <div class="callout small">
      <small>
        <time datetime="2015-05-10T18:40:00Z">
          Sun May 10, 2015
        </time> by .
        
        Tags: 
  
    
      <a href="/tags/networking.html">
        Networking
      </a>
  
    ,
    
      <a href="/tags/routeros.html">
        RouterOS
      </a>
  
    ,
    
      <a href="/tags/mikrotik.html">
        Mikrotik
      </a>
  

.
        <br>
        
          Share

    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.tiernanotoole.ie%2f2015%2f05%2f10%2fvlans-wifi-and-mikrotik.html" title="Share on Facebook">
      Facebook
    </a>,


    <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.tiernanotoole.ie%2f2015%2f05%2f10%2fvlans-wifi-and-mikrotik.html" title="Share on Google+">
      Google+
    </a>,


    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.tiernanotoole.ie%2f2015%2f05%2f10%2fvlans-wifi-and-mikrotik.html" title="Share on LinkedIn">
      LinkedIn
    </a>,


    <a href="https://twitter.com/home?status=https%3a%2f%2fwww.tiernanotoole.ie%2f2015%2f05%2f10%2fvlans-wifi-and-mikrotik.html" title="Tweet this">
      Twitter
    </a>


        
      </small>
    </div>
    <p>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6435972961836580"
             data-ad-slot="5573260001"
             data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

      <p>About a month ago, while i was recovering from surgery, i attended a Webinar on
<a href="http://www.meraki.com">Cisco Meraki</a> devices. After the webinar, i was contacted by Maraki and given a <a href="https://meraki.cisco.com/products/wireless/mr18">MR18</a> with a 3 year license, to play with and evaluate. So, i set it up in the house and all was good.</p>

<p>Thing is, the wifi in the house was grand previously. I have a <a href="http://routerboard.com/RB951G-2HnD">Routerboard RB951G</a> which does the job and has no issues. And because i am mostly offsite in the office i work, and because i need to remotely manage the network, the MR18 is going into the office from tomorrow morning. I may talk about the MR18 and the rest of the Meraki gear later on, but this is not that post. This post is about something the MR18 did, and i wanted to do on the RB951.</p>

<p>So, the MR18 allows you to create multiple Wifi SSIDs, each with different encryption and security and can use different VLANs. Now, the Mikrotik does the same, but the VLANs stuff is not that easy to figure out. but essentially, what i needed to do was as follows:</p>

<p>create your new wifi SSIDs:</p>

<pre><code>/interface wireless
add master-interface=wlan1 name=wlan1.10 ssid=vlan10
add master-interface=wlan1 name=wlan1.20 ssid=vlan20
</code></pre>

<p>next, create your vlans. these need to be connected back to your main
ethernet connection. In the case of my RB951, there are 5 ethernet
ports. 1 is the gateway back to my Cisco switch and on to my <a href="http://www.pfsense.org">PFSense</a> router. 2-5 are all slaves of number 1, which is a master. So, 1 is essentially a trunk network. So, vlans are created on that.</p>

<pre><code>/interface vlan
add name=vlan10 interface=ether1-gateway name=ether1.10 vlan-id=10
add name=vlan20 interface=ether1-gateway name=ether1.20 vlan-id=20
</code></pre>

<p>next, a bridge to connect them</p>

<pre><code>/interface bridge
add name=vlan10
add name=vlan20
</code></pre>

<p>and connect them to the bridge</p>

<pre><code>/interface bridge port
add bridge=vlan10 interface ether1.10
add bridge=vlan10 interface wlan1.10
add bridge=vlan20 interface ether1.20
add bridge=vlan20 interface wlan1.20
</code></pre>

<p>And thats all i needed to do. I have a <a href="https://www.sophos.com/en-us/products/free-tools/sophos-utm-home-edition.aspx">Sophos UTM Home edition</a> running on a vm for testing, which vlan10 is connected to. It has an upstream connection back to the PFSense box, which has it firewalled off and allows it outside the network, not nothing else. I am planning on doing this with other firewalls, just to do some testing with. This allows me to connect my phone or laptop, or any other wifi device, to a given wifi connection and then be on my way. I also have an older Dell PowerConnect switch, which, if i ever get around to it, will have multiple connections back to the Cisco and then allow physical devices to connect to different vlans.</p>

<p>Any questions, comments, etc, leave a comment blow.</p>

    </p>
    
    <hr>
  </div>

  
    
<div id="disqus_thread"></div>
<script>

 var disqus_config = function () {
        this.page.url = "https://www.tiernanotoole.ie/2015/05/10/vlans-wifi-and-mikrotik.html";  
        this.page.identifier = "https://www.tiernanotoole.ie/2015/05/10/vlans-wifi-and-mikrotik.html"; 
    };
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://tiernanotooleie.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            


  

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6435972961836580"
     data-ad-slot="1003459608"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<br>
<a href="https://www.tiernanotoole.ie/2015/05/10/vlans-wifi-and-mikrotik.html" class="hide-child link primary-color">“VLANs, Wifi and Mikrotik”</a> was last updated: 
July 4, 2018: <a  href="https://github.com/tiernano/www.tiernanotoole.ie_hugo//commit/683268775dc2ea118ebc7bc8b387defe55261fd0">updating posts and a bit of cleanup 
  (6832687)</a>. Found an issue? <a href="https://github.com/tiernano/www.tiernanotoole.ie_hugo/edit/master/content/post/2015-05-10-vlans-wifi-and-mikrotik.markdown">Improve this page</a>

        </div>
          <div class="medium-3 columns" data-sticky-container>
  <div class="sticky" data-sticky data-anchor="content">

  
    <h4>About</h4>
    <p>homepage of Tiernan OToole, Geek, photographer, GeekPhotographer, and lazy git.</p>
  

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-6435972961836580"
       data-ad-slot="2480192807"
       data-ad-format="auto"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  

  <h4>Recent Posts</h4>
  <ul>
    
      <li><a href="/2018/07/05/auto-deploying-to-multiple-servers-with-github-and-webhooks.html">
        Auto deploying to multiple servers with GitHub and Webhooks
      </a></li>
    
      <li><a href="/2018/07/04/moving-the-site-to-hugo.html">
        Moving the site to Hugo
      </a></li>
    
      <li><a href="/2018/07/02/playing-with-amd-epyc.html">
        Playing with AMD&rsquo;s Epyc
      </a></li>
    
      <li><a href="/2018/04/01/as204994-own-ip-space-and-anycast.html">
        AS204994, Own IP Space and Anycast
      </a></li>
    
      <li><a href="/2018/03/06/blogging-on-ipad.html">
        Blogging on an iPad Pro
      </a></li>
    
      <li><a href="/2017/09/25/new-backup-plans.html">
        New Backup Plans
      </a></li>
    
      <li><a href="/2017/08/16/testing-forestry.html">
        Testing Forestry
      </a></li>
    
      <li><a href="/2017/05/06/vscode-with-powershell.html">
        VSCode and Markdown Monster with Powershell
      </a></li>
    
      <li><a href="/2017/05/05/zerotier-minio-update.html">
        Zerotier and Minio Followup
      </a></li>
    
      <li><a href="/2017/03/09/business-class-broadband.html">
        Business Class Broadband&hellip; finally here&hellip;.
      </a></li>
    
  </ul>

  
    <h4>Links</h4>
    <ul>
      
        <li><a href="https://www.tiernanotoole.ie/dailycarry/">
          Daily Carry
        </a></li>
      
        <li><a href="https://geekphotographer.com">
          Geek Photographer
        </a></li>
      
    </ul>
  

  </div>
</div>

      </div>
    </main>

    <footer class="blog-footer">
      <div class="row column">
        <p>
          
          2018 Tiernan OToole
          
        </p>
        <p>
          <a href="https://www.tiernanotoole.ie/2015/05/10/vlans-wifi-and-mikrotik.html#">Back to top</a>
        </p>
      </div>
    </footer>

  <foot>

    <script src="https://www.tiernanotoole.ie/js/app.js"></script>


    <script type="text/javascript">
      var vglnk = {
          key: 'aecb90add8b6f7192e42ddfa3e65b611'
      };
  
      (function(d, t) {
          var s = d.createElement(t);
          s.type = 'text/javascript';
          s.async = true;
          s.src = '//cdn.viglink.com/api/vglnk.js';
          var r = d.getElementsByTagName(t)[0];
          r.parentNode.insertBefore(s, r);
      }(document, 'script'));
  </script>
  

  </foot>
  </body>
</html>
