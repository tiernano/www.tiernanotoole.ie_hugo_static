<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RouterOS Using Host names in Firewall Rules | Tiernan&#39;s Comms Closet</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">RouterOS Using Host names in Firewall Rules</span></h1>

<h2 class="date">2012/10/12</h2>
</div>

<main>
<p>As a follow up to yesterday&rsquo;s post on <a href="http://tiernanotoole.ie/2012/10/11/routeros_blocking_machine_access.html">RouterOS Blocking Machine access to all but one IP</a> I tought i would show how to add extra IPs to that list, without having a shedload of firewall filters.</p>

<ul>
<li>First things first, get your list of IPs you allow access to. In my case, i just did an NSLOOKUP on the name and got the IPs.</li>
<li>Create an &ldquo;Address List&rdquo; in RouterOS. This can be done on the Web Interface by going to IP / Firewall / Address List and clicking Add. I had none previously, so i created a new rule, naming it <a href="www.expressvpn.com/?referrer_email=tiernan@tiernanotoole.ie/">ExpressVPN</a> (the lads i use for VPN access) and added the first address.</li>
<li>this is where things get interesting. for extra IP (for ExpressVPN, i have 4) you create a new address with the SAME name, but different IP.</li>
<li>in your firewall rule, you should have either a src address or dst address. in my case, i had both, but this was a change for the dst address. I removed the address from the rule, i added it as a dst address list entry. If you have multiple address lists, you will see them here.</li>
</ul>

<p>to do this at the command prompt:</p>

<script src="//gist.github.com/tiernano/3877692.js"></script>

<p>this will block any traffic, other than the IPs in the expressVPN address list, for the machine 192.168.0.123.</p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

