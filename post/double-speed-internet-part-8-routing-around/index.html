<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>double speed Internet Part 8 - Routing Around | Tiernan&#39;s Comms Closet</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">double speed Internet Part 8 - Routing Around</span></h1>

<h2 class="date">2016/06/08</h2>
</div>

<main>
<p>[NOTE] This part 8 in a series of posts. The rest can be found <a href="https://www.tiernanotoole.ie/tag/Double_Internet/">here</a>.</p>

<p>At the end of my <a href="https://www.tiernanotoole.ie/2016/05/31/double-speed-internet-part-7-ecmp-kind-of.html">last post</a> I asked the question about routing traffic to different servers based on thier distances, etc&hellip; Well, after a bit of messing, i can say it kind of works! here is a quick over view:</p>

<ul>
<li>server in the house has now got multiple OpenVPN connections (2 to <a href="http://www.hetzner.de/en">Hetzner</a>, 1 to <a href="http://www.ovh.ie">OVH</a> (with a plan to double), 1 to <a href="https://m.do.co/c/d4d345b83b55">Digital Ocean</a> (again, to be doubled) and i am planning 2 to <a href="http://www.azure.com">Azure</a> as well).</li>
<li><a href="http://www.nongnu.org/quagga/">Quagga/Zebra</a> has static routes (currently static, planing on dynamic soon&hellip; more eventually) to different servers depending on where they are. for example, all traffic to the hetzner network (including their <a href="https://www.hetzner.de/en/hosting/produktmatrix/storagebox-produktmatrix">Storage Boxes</a>) go though the hetzner link. <a href="http://www.hubic.com">Hubic</a> traffic goes though OVH, Azure (currently) and AWS traffic, aswell as some CDNs go direct over either WAN1 or WAN2 in the house, and some other stuff (<a href="http://www.crashplan.com">CrashPlan</a> currently) goes though Digital Ocean. Everything that has no static route goes though Hetzner&hellip;</li>
<li>Ideally, the static side of things should be removed, and a more dynamic setup done. How that works, i have no idea&hellip; <a href="http://www.spotify.com">Spotify</a> have 2 posts about their SDN Internet Router (<a href="https://labs.spotify.com/2016/01/26/sdn-internet-router-part-1/">part 1</a> and <a href="https://labs.spotify.com/2016/01/27/sdn-internet-router-part-2/">part 2</a>) which is an interesting idea&hellip; More digging and research is required.</li>
</ul>

<p>So, there you have it. Everything currently seems to be working, mostly, and tweaks can be made easily&hellip; I have a couple posts i have in my head, including something to do with automating bringing up new machines (probably with <a href="https://www.ansible.com/">Ansible</a> or something like it), more monitoring, and some other stuff too&hellip; Any questions, leave a comment, and i will get back.</p>

<p>[UPDATE] I wrote a quick and dirty app called <a href="https://github.com/tiernano/whoistozebraconfig">WhoIsToZebraConfig</a> which takes an AS Number, looks up the info in the <a href="http://www.radb.net/">Merit RADb</a> (with the help of some code from <a href="https://coderbuddy.wordpress.com/2010/10/12/a-simple-c-class-to-get-whois-information/">Coder Buddy</a>) and outputs what you need to put into your Zebra Config&hellip; should save me some time, and it might save you time too&hellip;  shout if you have questions!</p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

