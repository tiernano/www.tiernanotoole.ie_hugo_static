<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MicroTik RouterOS VPN Setup | Tiernan&#39;s Comms Closet</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">MicroTik RouterOS VPN Setup</span></h1>

<h2 class="date">2012/09/24</h2>
</div>

<main>


<p>I have been running a <a href="http://www.routerboard.com">MikroTik RouterBoard</a> in the house for a couple of months now (the <a href="http://www.routerboard.com/RB750G">RB750G</a>) and I am very much loving the thing. But one thing you may need to do is setup VPN connections&hellip; Here are some tips on how to create a VPN Server and Client on your RouterBoard.</p>

<h2 id="client-setup">Client Setup</h2>

<p>to setup a client, you need to do the following:</p>

<script src="//gist.github.com/tiernano/8581643.js"></script>

<p>What does that all do? the first line creates an l2tp-client interface, pointing at &ldquo;servername&rdquo; with the username and password set. encryption, etc is enabled&hellip; Line 2 then enables the client. Line 3 sets all traffic comming from networkaddress/24 (for example, 192.168.0.<sup>1</sup>&frasl;<sub>24</sub>) to be sent though the VPN. any traffic going into networkaddress (same example) is not sent though the VPN. Line 4 creates a gateway, for all addresses (0.0.0.0/0) to use the VPN address. finally, NAT Masquerading is enabled on the VPN interface.</p>

<p>there are more advanced things you can set above&hellip; some examples I can think of are as follows:</p>

<ul>
<li>There should be no good reason to limit the amount of VPN connections you have&hellip; in theory, you could have multiple&hellip;</li>
<li>for the mangle rule, set the src-address to a single machine in your network. that way, it gets VPN only connections. Also, you could set the dst-address to a single address or network to send only traffic going to a given server though the VPN&hellip; Example would be Netflix US traffic to a US VPN server, BBC iPlayer traffic to a UK VPN, etc.</li>
<li>the example above uses L2TP, but PPTP, SSTP and OpenVPN are also available.</li>
</ul>

<h2 id="server-setup">Server Setup</h2>

<p>As mentioned above, L2TP, PPTP, SSTP and OpenVPN servers are available on RouterOs. Details on setting them up are available on MicroTik&rsquo;s Wiki at the following locations:</p>

<ul>
<li><a href="http://wiki.mikrotik.com/wiki/Manual:Interface/OVPN">OpenVPN</a></li>
<li><a href="http://wiki.mikrotik.com/wiki/Manual:Interface/PPTP">PPTP</a></li>
<li><a href="http://wiki.mikrotik.com/wiki/Manual:Interface/L2TP">L2TP</a></li>
<li><a href="http://wiki.mikrotik.com/wiki/Manual:Interface/SSTP">SSTP</a></li>
</ul>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

