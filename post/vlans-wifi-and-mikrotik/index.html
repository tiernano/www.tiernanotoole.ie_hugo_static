<!DOCTYPE html>
<html class="nojs" lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes">
<title>VLANs, Wifi and Mikrotik – Tiernan&#39;s Comms Closet</title>
<meta name="created" content="2015-05-10T18:40:00&#43;0000">
<meta name="modified" content="2015-05-10T18:40:00&#43;0000">

<meta name="description" content="About a month ago, while i was recovering from surgery, i attended a Webinar on Cisco Meraki devices. After the webinar, i was contacted by Maraki and given a MR18 with a 3 year license, to play with and evaluate. So, i set it up in the house and all was good. Thing is, the wifi in the house was grand previously. I have a Routerboard RB951G which does the job and has no issues.">
<meta property="og:site_name" content="Tiernan&#39;s Comms Closet">
<meta property="og:title" content="VLANs, Wifi and Mikrotik">
<meta property="og:url" content="https://tiernano.github.io/www.tiernanotoole.ie_hugo_static/post/vlans-wifi-and-mikrotik/">

<meta name="generator" content="Hugo 0.42.1" />

<link rel="canonical" href="https://tiernano.github.io/www.tiernanotoole.ie_hugo_static/post/vlans-wifi-and-mikrotik/">
<link rel="apple-touch-icon" href="/www.tiernanotoole.ie_hugo_static/apple-touch-icon.png">
<link rel="stylesheet" href="/www.tiernanotoole.ie_hugo_static/css/styles.css">
<link rel="stylesheet" href="/www.tiernanotoole.ie_hugo_static/css/print.css" media="print">
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "VLANs, Wifi and Mikrotik",
    "datePublished": "2015-05-10T18:40:00Z",
    "dateModified": "2015-05-10T18:40:00Z",
    "url" : "https://tiernano.github.io/www.tiernanotoole.ie_hugo_static/post/vlans-wifi-and-mikrotik/",
    "description": "About a month ago, while i was recovering from surgery, i attended a Webinar on Cisco Meraki devices. After the webinar, i was contacted by Maraki and given a MR18 with a 3 year license, to play with and evaluate. So, i set it up in the house and all was good. Thing is, the wifi in the house was grand previously. I have a Routerboard RB951G which does the job and has no issues.",
    "keywords": ["Networking","RouterOS","Mikrotik"],
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://tiernano.github.io/www.tiernanotoole.ie_hugo_static/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Tiernan's Comms Closet",
      "url": "https://tiernano.github.io/www.tiernanotoole.ie_hugo_static/",
    }
  }
</script>

</head>

<body>
<div class="page layout__page layout__sidebar-second">
<header class="header layout__header" role="banner">
<a href="/www.tiernanotoole.ie_hugo_static/" title="Home" rel="home" class="header__logo"><img src="/www.tiernanotoole.ie_hugo_static/images/logo.png" alt="Home" class="header__logo-image"></a>
<h1 class="header__site-name">
<a href="/www.tiernanotoole.ie_hugo_static/" title="Home" class="header__site-link" rel="home"><span>Tiernan&#39;s Comms Closet</span></a>
</h1>
<div class="region header__region">


</div>
</header>




<nav class="main-menu layout__navigation" role="navigation">
<h2 class="visually-hidden">Main menu</h2>
<ul class="navbar">
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/">Home</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/daily-carry/">Daily Carry</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/testing/">testing</a></li>
<li><a class="active" href="/www.tiernanotoole.ie_hugo_static/post/">Posts</a></li>
</ul>
</nav>


<main class="main layout__main" role="main">
<h1 class="title ">VLANs, Wifi and Mikrotik</h1>
<article class="section-post single-view">
<header>
<div class="tags">
Tags:
<ul>
<li><a href="/www.tiernanotoole.ie_hugo_static/tags/networking">Networking</a></li>
<li><a href="/www.tiernanotoole.ie_hugo_static/tags/routeros">RouterOS</a></li>
<li><a href="/www.tiernanotoole.ie_hugo_static/tags/mikrotik">Mikrotik</a></li>
</ul>
</div>
</header>
<div class="content">
<p>About a month ago, while i was recovering from surgery, i attended a Webinar on
<a href="http://www.meraki.com">Cisco Meraki</a> devices. After the webinar, i was contacted by Maraki and given a <a href="https://meraki.cisco.com/products/wireless/mr18">MR18</a> with a 3 year license, to play with and evaluate. So, i set it up in the house and all was good.</p>

<p>Thing is, the wifi in the house was grand previously. I have a <a href="http://routerboard.com/RB951G-2HnD">Routerboard RB951G</a> which does the job and has no issues. And because i am mostly offsite in the office i work, and because i need to remotely manage the network, the MR18 is going into the office from tomorrow morning. I may talk about the MR18 and the rest of the Meraki gear later on, but this is not that post. This post is about something the MR18 did, and i wanted to do on the RB951.</p>

<p>So, the MR18 allows you to create multiple Wifi SSIDs, each with different encryption and security and can use different VLANs. Now, the Mikrotik does the same, but the VLANs stuff is not that easy to figure out. but essentially, what i needed to do was as follows:</p>

<p>create your new wifi SSIDs:</p>

<pre><code>/interface wireless
add master-interface=wlan1 name=wlan1.10 ssid=vlan10
add master-interface=wlan1 name=wlan1.20 ssid=vlan20
</code></pre>

<p>next, create your vlans. these need to be connected back to your main
ethernet connection. In the case of my RB951, there are 5 ethernet
ports. 1 is the gateway back to my Cisco switch and on to my <a href="http://www.pfsense.org">PFSense</a> router. 2-5 are all slaves of number 1, which is a master. So, 1 is essentially a trunk network. So, vlans are created on that.</p>

<pre><code>/interface vlan
add name=vlan10 interface=ether1-gateway name=ether1.10 vlan-id=10
add name=vlan20 interface=ether1-gateway name=ether1.20 vlan-id=20
</code></pre>

<p>next, a bridge to connect them</p>

<pre><code>/interface bridge
add name=vlan10
add name=vlan20
</code></pre>

<p>and connect them to the bridge</p>

<pre><code>/interface bridge port
add bridge=vlan10 interface ether1.10
add bridge=vlan10 interface wlan1.10
add bridge=vlan20 interface ether1.20
add bridge=vlan20 interface wlan1.20
</code></pre>

<p>And thats all i needed to do. I have a <a href="https://www.sophos.com/en-us/products/free-tools/sophos-utm-home-edition.aspx">Sophos UTM Home edition</a> running on a vm for testing, which vlan10 is connected to. It has an upstream connection back to the PFSense box, which has it firewalled off and allows it outside the network, not nothing else. I am planning on doing this with other firewalls, just to do some testing with. This allows me to connect my phone or laptop, or any other wifi device, to a given wifi connection and then be on my way. I also have an older Dell PowerConnect switch, which, if i ever get around to it, will have multiple connections back to the Cisco and then allow physical devices to connect to different vlans.</p>

<p>Any questions, comments, etc, leave a comment blow.</p>


</div>
</article>
</main>



<aside class="sidebar layout__second-sidebar" role="complementary">
<section>
<h4 class="menu"><a class="" href="/www.tiernanotoole.ie_hugo_static/post/">Posts</a></h4>
<ul class="menu">
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/playing-with-amd-epyc/">Playing with AMD&#39;s Epyc</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/as204994-own-ip-space-and-anycast/">AS204994, Own IP Space and Anycast</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/blogging-on-ipad/">Blogging on an iPad Pro</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/new-backup-plans/">New Backup Plans</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/testing-forestry/">Testing Forestry</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/vscode-with-powershell/">VSCode and Markdown Monster with Powershell</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/zerotier-minio-update/">Zerotier and Minio Followup</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/business-class-broadband/">Business Class Broadband... finally here....</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/distributed-s3-storage-minio-zerotier/">Distributed S3 data storage using Minio (and Zerotier)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/docker-jekyll-and-mr-ngrock/">Docker Jekyll and Mr ngrok</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/building-jekyll-sites-with-docker-on-windows/">Building Jekyll sites with Docker on Windows</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/cloud-desktop-becoming-reality./">Cloud Desktop becoming a reality</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/double-speed-internet-part-9-going-back/">double speed Internet Part 9 - Going Back</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/meraki-gear-update/">Meraki and Ubiquiti networks gear Update</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/double-speed-internet-part-8-routing-around/">double speed Internet Part 8 - Routing Around</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/double-speed-internet-part-7-ecmp-kind-of/">double speed Internet Part 7 - ECMP (kind of)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/double-speed-internet-part-6-hetzner-edition/">double speed Internet Part 6 - Hetzner Edition</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/useful-web-and-desktop-apps-2016-edition/">Useful Web and Desktop Apps 2016 edition</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/2-cable-modems-double-speed-part-5/">(Mad) Max Speed - The Road Warrior (Internet connection) (double speed internet Part 5)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/2-cable-modems-double-speed-part-4/">2 Cable Modems = Double Speed? Part 4</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/installing-jekyll-on-bash-on-ubuntu-on-windows/">Installing Jekyll on Bash On Ubuntu on Windows</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/2-cable-modems-double-speed-part-3/">2 Cable modems = Double speed? Part 3</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/bash-on-ubuntu-on-windows/">Bash on Ubuntu on Windows</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/mptcp-ssh-squid-openvpn-double-speed-part-2/">MPTCP, SSH, Squid, OpenVPN (and 2 Cable modems) = Double Speed? Not quite... Part 2</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/continuous-integration-and-blogging/">Continuous Integration and Blogging</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/2-cable-modems-double-internet-speed-part1/">2 Cable modems = Double Internet Speed? Well... not really... Part 1</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/announcing-b2uploader-hubictesting20/">Announcing B2 Uploader and Hubic Testing 2.0</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/edgerouter-sophosutm-dmz-lan-firwwalls/">Edge Router, Sophos UTM, DMZ and LAN Networks</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/network-and-homelab-vnext-part-4/">Network and HomeLab V.Next (Part 4)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/windwsserver2012r2-returing-to-the-godboxv2/">Windows Server 2012 R2 returning to The GodBoxV2</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/zfs-home-dir/">ZFS Home storage pool</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/ubiquiti-edgerouter-poe-in-the-lab/">Ubiquiti EdgeRouter PoE in the lab</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/network-and-homelab-vnext-part-3/">Network and HomeLab V.Next (Part 3)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/network-and-homelab-vnext-part2/">Network and HomeLab V.Next (Part 2)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/network-and-homelab-vnext-part-1/">Network and Homelab V.Next (Part 1)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/pfsense-with-multiple-public-ips/">PFSense with Multiple Public IPs</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/quick-tip-for-internet-facing-esxi/">Quick tip for internet facing ESXi servers</a></li>
<li><a class="active" href="/www.tiernanotoole.ie_hugo_static/post/vlans-wifi-and-mikrotik/">VLANs, Wifi and Mikrotik</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/using-git-and-route53/">Using git and Route53 together</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/git-push-dns/">Git Push DNS</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/bulk-compressing-images-for-the-web/">Bulk compressing images for the Web</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/all-blogs-moved-to-jekyll/">All blogs moved to Jekyll</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/duplicity_hubic/">Hubic and Duplicity</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/hubic_swift_curl/">Hubic, OpenStack Swift and Curl</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/daily_carry/">Daily Carry, March 2015 Edition</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/mobile_phone_as_a_service/">Mobile Phone as a Service</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/cdnhostedblog/">CDN Hosted Blog</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/raspberrypi_astrisk_box/">Raspberry Pi as an Asterisk Box</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/college_bag_contents/">College Bag Contents</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/raspberry_pi_as_a_mobile_wifi_hotspot_-_part_1/">Raspberry Pi as a Mobile WiFi HotSpot (part 1)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/moving_sites_to_nearlyfreespeech/">Moving sites to NearlyFreeSpeech</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/send_emails_as_a_distribution_group_in_office365/">Send Emails as a Distribution Group in Office365</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/ipv6_firewall_rules_for_mikrotik_routeros/">IPv6 Firewall rules for MikroTik RouterOS</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/ipv6_%2b_mikrotik_%2b_linux_%2b_windows/">IPv6 &#43; MikroTik &#43; Linux &#43; Windows</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/compressing_and_uncompressing_protobuf_items_in_c/">Compressing and UnCompressing Protobuf items in C#</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/git_tips_and_tricks/">GIT tips and tricks</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/symform_-_p2p_backup/">Symform - P2P Backup</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/enabling_vnc_from_ssh_on_osx/">enabling VNC from SSH on OSX</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/moving_your_tmg_sql_server_and_other_tmg_tips/">moving your TMG SQL server Logs DB and other TMG tips</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/routeros_dynamic_ip_updates/">RouterOS Dynamic IP Updates</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/custom_msdeploy_overwrite_rules/">Custom MSDeploy OverWrite Rules</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/wanproxy_and_squid_with_upstream_servers/">WANProxy and Squid with Upstream Servers</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/building_wanproxy_on_ubuntu_12.04/">Building WANProxy on Ubuntu 12.04</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/boot_raspberry_pi_with_ssh_enabled/">Boot Raspberry Pi with SSH Enabled, Enable Wifi on Boot, and more</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/gps_and_raspberry_pi/">GPS and Raspberry Pi</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/raspberry_pi_now_with_512mb_ram/">Raspberry Pi now with 512MB RAM, other random links...</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/more_raspberry_pi_and_camera_antics/">more raspberry pi and camera antics</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/routeros_using_host_names_in_firewall_rules/">RouterOS Using Host names in Firewall Rules</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/routeros_blocking_machine_access/">RouterOS Blocking Machine access to all but one IP</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/zfs_iscsi_nfs_sftp_hyper-v_and_more/">ZFS iSCSI NFS SFTP Hyper-V and more</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/more_jekyll_stuff/">More Jekyll Stuff</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/handbrake-cluster/">Handbrake Cluster</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/enabling-true-briding-mode-on-cisco-epc3925/">Enabling True Bridging modem on a Cisco ECP3925 Cable Modem (UPC Ireland)</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/powershell-handbrake-appletv-itunes/">PowerShell &#43; HandBrake &#43; AppleTV &#43; iTunes = Automatic TV... Ish...</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/crashplan-backups/">Crashplan Backups</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/more-voip-stuff/">More VoIP Stuff</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/raspberry-pi-cross-compiling/">Building a Cross Compiler for your Raspberry Pi</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/microtik-routeros-vpn-setup/">MicroTik RouterOS VPN Setup</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/ssh-tunneling-made-simple/">SSH Tunneling made simple</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/voip-stuff/">VOIP Stuff</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/rasberry-stuff/">Raspberry Pi Stuff</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/build-your-own-private-git-server/">Build your own Private GIT server</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/understanding-windows8-storage-spaces/">Understanding Storage Spaces in Windows 8 and Windows Server 2012</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/sublimetext-with-powershell/">Sublime Text 2 with Powershell</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/autoscalling-with-amazon/">AutoScaling with Amazon</a></li>
<li><a class="" href="/www.tiernanotoole.ie_hugo_static/post/newsite/">My new Git Powered Site</a></li>
</ul>
</section>
</aside>


<footer class="footer layout__footer" role="contentinfo">
<p><span>© Tiernan&#39;s Comms Closet</span></p>


</footer>

</div>



</body>
</html>
